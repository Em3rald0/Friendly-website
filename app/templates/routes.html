{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2 style="color: #f0f0f0; margin-bottom: 20px;">Маршруты для прогулок</h2>
    
    <form action="/routes" method="get" style="margin-bottom: 20px;">
        <input type="text" name="city" placeholder="Фильтр по городу" value="{{ city if city }}" style="width: 100%; max-width: 400px; padding: 10px 15px; border: none; border-radius: 20px; background-color: #333; color: #fff; font-size: 14px; box-sizing: border-box;">
        <button type="submit" style="background-color: #4a90e2; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 14px; margin-left: 10px;">Применить</button>
    </form>
    
    <div class="main-content" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
        {% for route in routes %}
        <div class="tour-card {% if route.is_premium %}premium{% endif %}" style="background: #2a2a2a; border-radius: 8px; border: 1px solid {% if route.is_premium %}#ffd700{% else %}#3a3a3a{% endif %}; padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
            <h3 style="color: #4a90e2; margin-top: 0; display: flex; align-items: center;">
                <a href="/routes/{{ route.id }}" style="color: inherit; text-decoration: none;">{{ route.title }}</a>
                {% if route.is_premium %}
                <span class="premium-badge" style="background-color: #ffd700; color: #000; padding: 3px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-left: 10px;">PRO</span>
                {% endif %}
            </h3>
            <p style="color: #b0b0b0; line-height: 1.5;">
                <strong>Город:</strong> {{ route.city }}<br>
                <strong>Дистанция:</strong> {{ route.distance_km }} км<br>
                <strong>Время:</strong> {{ route.walk_time_min }} мин<br>
                <strong>Рейтинг:</strong> {{ route.rating }}/5
            </p>
            <div style="display: flex; justify-content: space-between; margin-top: 15px;">
                <a href="/routes/{{ route.id }}" style="color: #4a90e2; text-decoration: none; font-size: 14px;">Подробнее</a>
                {% if request.cookies.get("access_token") %}
                    {% if route.id in favorite_ids %}
                    <a href="/favorites/remove/{{ route.id }}" style="color: #ff6b6b; text-decoration: none; font-size: 14px;">Удалить из избранного</a>
                    {% else %}
                    <a href="/favorites/add/{{ route.id }}" style="color: #4a90e2; text-decoration: none; font-size: 14px;">В избранное</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}